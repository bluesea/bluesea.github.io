{"version":3,"sources":["webpack:///./src/components/Toast.vue","webpack:///./src/components/Toast.vue?23c7","webpack:///./src/views/login/Login.vue?4b31","webpack:///./src/components/Toast.vue?4877","webpack:///./src/views/login/Login.vue","webpack:///./src/views/login/Login.vue?4c80"],"names":["class","message","props","toastData","show","toastMessage","showToast","setTimeout","render","__scopeId","src","alt","type","placeholder","username","password","handleLogin","handleRegister","a","defaults","headers","post","data","router","length","result","console","log","code","localStorage","isLogin","push","name","alert","components","Toast","setup"],"mappings":"wOACSA,MAAM,S,wEAAX,eAAoC,MAApC,EAAoC,eAAf,EAAAC,SAAO,MAKjB,GACbC,MAAO,CAAC,YAEG,EAAiB,WAC5B,IAAMC,EAAY,eAAS,CACzBC,MAAM,EACNC,aAAc,KAEVC,EAAY,SAACL,GACjBE,EAAUC,MAAO,EACjBD,EAAUE,aAAeJ,EACzBM,YAAW,WACTJ,EAAUC,MAAO,EACjBD,EAAUE,aAAe,KACxB,MAEL,EAA+B,eAAOF,GAA9BC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,aACd,MAAO,CAAED,OAAMC,eAAcC,c,UClB/B,EAAOE,OAASA,EAChB,EAAOC,UAAY,kBAEJ,U,kCCRf,W,yDCAA,W,6JCCST,MAAM,W,EACP,eAAkF,OAA7EA,MAAM,eAAeU,IAAI,6CAA6CC,IAAI,I,YAC1EX,MAAM,kB,GAGNA,MAAM,kB,sGALf,eAaM,MAbN,EAaM,CAZF,EACA,eAEM,MAFN,EAEM,C,eADF,eAA2F,SAApFA,MAAM,0BAA0BY,KAAK,OAAOC,YAAY,S,qDAAkB,EAAAC,SAAQ,K,mBAAR,EAAAA,cAErF,eAEM,MAFN,EAEM,C,eADF,eAA8F,SAAvFd,MAAM,0BAA0BY,KAAK,WAAWC,YAAY,Q,qDAAiB,EAAAE,SAAQ,K,mBAAR,EAAAA,cAExF,eAAgE,OAA3Df,MAAM,wBAAyB,QAAK,8BAAE,EAAAgB,aAAA,EAAAA,YAAA,sBAAa,MACxD,eAEM,OAFDhB,MAAM,sBAAuB,QAAK,8BAAE,EAAAiB,gBAAA,EAAAA,eAAA,sBAAgB,UAG5C,EAAAb,M,iBAAb,eAA4C,G,MAAxBH,QAAS,EAAAI,c,iIAUrC,EAAAa,EAAMC,SAASC,QAAQC,KAAK,gBAAkB,mBAE9C,IAAM,EAAiB,SAACf,GACtB,IAAMgB,EAAO,eAAS,CACpBR,SAAU,GACVC,SAAU,KAENQ,EAAS,iBACTP,EAAU,yDAAI,2GACVF,EAAuBQ,EAAvBR,SAAUC,EAAaO,EAAbP,SACM,IAApBD,EAASU,OAFK,uBAGhBlB,EAAU,UAHM,6BAMM,IAApBS,EAASS,OANK,uBAOhBlB,EAAU,SAPM,oDAWK,eAAK,aAAc,CACtCQ,SAAUQ,EAAKR,SACfC,SAAUO,EAAKP,WAbD,QAWVU,EAXU,OAehBC,QAAQC,IAAIF,EAAOG,MACC,MAAhBH,EAAOG,MACTC,aAAaC,SAAU,EACvBP,EAAOQ,KAAK,CAAEC,KAAM,UAEpB1B,EAAU,QApBI,qDAwBhBA,EAAU,QACV2B,MAAM,QAzBU,0DAAJ,qDAyChB,EAA+B,eAAOX,GAA9BR,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,SAClB,MAAO,CAAED,WAAUC,WAAUC,gBAGzB,EAAoB,WACxB,IAAMO,EAAS,iBACTN,EAAiB,WACrBS,QAAQC,IAAI,MACZJ,EAAOQ,KAAK,CAAEC,KAAM,cAEtB,MAAO,CAAEf,mBAGI,GACbe,KAAM,QACNE,WAAY,CAAEC,QAAA,MACdC,MAHa,WAgDX,MAA0C,iBAAlChC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,aAAcC,EAA5B,EAA4BA,UAC5B,EAA4C,EAAeA,GAAnDQ,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,SAAUC,EAA5B,EAA4BA,YAC5B,EAA2B,IAAnBC,EAAR,EAAQA,eAER,MAAO,CAAEH,WAAUC,WAAUC,cAAaC,iBAAgBb,OAAMC,kB,UCpIpE,EAAOG,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/login.e19ad87d.js","sourcesContent":["<template>\n    <div class=\"toast\">{{message}}</div>\n</template>\n\n<script>\nimport { reactive, toRefs } from 'vue'\nexport default {\n  props: ['message']\n}\nexport const useToastEffect = () => {\n  const toastData = reactive({\n    show: false,\n    toastMessage: ''\n  })\n  const showToast = (message) => {\n    toastData.show = true\n    toastData.toastMessage = message\n    setTimeout(() => {\n      toastData.show = false\n      toastData.toastMessage = ''\n    }, 2000)\n  }\n  const { show, toastMessage } = toRefs(toastData)\n  return { show, toastMessage, showToast }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../style/viriables.scss';\n.toast {\n    position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%,-50%);\n    padding:.1rem;\n    border-radius:.05rem;\n    background:rgb(0, 0, 0,.35);\n    color: $bgColor;\n}\n</style>\n","import { render } from \"./Toast.vue?vue&type=template&id=0c70de70&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=0c70de70&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0c70de70\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=a31018d6&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Toast.vue?vue&type=style&index=0&id=0c70de70&lang=scss&scoped=true\"","<template>\n    <div class=\"wrapper\">\n        <img class=\"wrapper__img\" src=\"http://www.dell-lee.com/imgs/vue3/user.png\" alt=\"\">\n        <div class=\"wrapper__input\">\n            <input class=\"wrapper__input__content\" type=\"text\" placeholder=\"请输入手机号\" v-model=\"username\">\n        </div>\n        <div class=\"wrapper__input\">\n            <input class=\"wrapper__input__content\" type=\"password\" placeholder=\"请输入密码\" v-model=\"password\">\n        </div>\n        <div class=\"wrapper__login-button\" @click=\"handleLogin\">登录</div>\n        <div class=\"wrapper__login-link\" @click=\"handleRegister\">\n            立即注册\n        </div>\n        <Toast v-if=\"show\" :message=\"toastMessage\"/>\n    </div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router'\nimport { reactive, toRefs } from 'vue'\nimport { post } from '../../utils/request'\nimport axios from 'axios'\nimport Toast, { useToastEffect } from '../../components/Toast'\naxios.defaults.headers.post['Content-Type'] = 'application/json'\n\nconst useLoginEffect = (showToast) => {\n  const data = reactive({\n    username: '',\n    password: ''\n  })\n  const router = useRouter()\n  const handleLogin = async () => {\n    const { username, password } = data\n    if (username.length === 0) {\n      showToast('请输入手机号')\n      return\n    }\n    if (password.length === 0) {\n      showToast('请输入密码')\n      return\n    }\n    try {\n      const result = await post('/api/login', {\n        username: data.username,\n        password: data.password\n      })\n      console.log(result.code)\n      if (result.code === 200) {\n        localStorage.isLogin = true\n        router.push({ name: 'Home' })\n      } else {\n        showToast('登录失败')\n        // alert('登录失败')\n      }\n    } catch (e) {\n      showToast('请求失败')\n      alert('请求失败')\n    }\n    // console.log('denglu')\n    // axios.post('https://www.fastmock.site/mock/092ee8c21b3f441e5289fa00fb625f68/testLogin/api/login', {\n    //   username: data.username,\n    //   password: data.password\n    // })\n    //   .then(function (response) {\n    //     console.log(response)\n    //   })\n    //   .catch(function (error) {\n    //     console.log(error)\n    //   })\n    // localStorage.isLogin = true\n    // router.push({ name: 'Home' })\n  }\n  const { username, password } = toRefs(data)\n  return { username, password, handleLogin }\n}\n\nconst useRegisterEffect = () => {\n  const router = useRouter()\n  const handleRegister = () => {\n    console.log('注册')\n    router.push({ name: 'Register' })\n  }\n  return { handleRegister }\n}\n\nexport default {\n  name: 'Login',\n  components: { Toast },\n  setup () {\n    // const data = reactive({\n    //   username: '',\n    //   password: ''\n    // })\n    // const router = useRouter()\n    // const { show, toastMessage, showToast } = useToastEffect()\n\n    // const handleLogin = async () => {\n    //   try {\n    //     const result = await post('/api1/login', {\n    //       username: data.username,\n    //       password: data.password\n    //     })\n    //     console.log(result.code)\n    //     if (result.code === 200) {\n    //       localStorage.isLogin = true\n    //       router.push({ name: 'Home' })\n    //     } else {\n    //       showToast('登录失败')\n    //       // alert('登录失败')\n    //     }\n    //   } catch (e) {\n    //     showToast('请求失败')\n    //     alert('请求失败')\n    //   }\n    //   // console.log('denglu')\n    //   // axios.post('https://www.fastmock.site/mock/092ee8c21b3f441e5289fa00fb625f68/testLogin/api/login', {\n    //   //   username: data.username,\n    //   //   password: data.password\n    //   // })\n    //   //   .then(function (response) {\n    //   //     console.log(response)\n    //   //   })\n    //   //   .catch(function (error) {\n    //   //     console.log(error)\n    //   //   })\n    //   // localStorage.isLogin = true\n    //   // router.push({ name: 'Home' })\n    // }\n    // const handleRegister = () => {\n    //   console.log('注册')\n    //   router.push({ name: 'Register' })\n    // }\n\n    const { show, toastMessage, showToast } = useToastEffect()\n    const { username, password, handleLogin } = useLoginEffect(showToast)\n    const { handleRegister } = useRegisterEffect()\n    // const { username, password } = toRefs(data)\n    return { username, password, handleLogin, handleRegister, show, toastMessage }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../style/viriables.scss\";\n.wrapper {\n    position: absolute;\n    top: 50%;\n    left: 0;\n    right: 0;\n    transform: translateY(-50%);\n    &__img {\n        display: block;\n        margin: 0 auto .4rem auto;\n        width: .66rem;\n        height: .66rem;\n    }\n    &__input {\n        margin:0 .4rem .16rem .4rem;\n        padding: 0 .16rem;\n        height: .48rem;\n        background: #F9F9F9;\n        border: 1px solid rgba(0,0,0,0.10);\n        border-radius: 6px;\n        &__content {\n            border: none;\n            outline: none;\n            line-height: .48rem;\n            width: 100%;\n            background: none;\n            font-size: .16rem;\n            color: $content-notice-fontcolor;\n            &::placeholder {\n                color: $content-notice-fontcolor;\n            }\n        }\n    }\n    &__login-button {\n        margin: .32rem .4rem .16rem .4rem;\n        height: .48rem;\n        background: $btn-bgColor;\n        box-shadow: 0 4px 8px 0 rgba(0,145,255,0.32);\n        border-radius: 4px;\n        color: $bgColor;\n        font-size: .16rem;\n        text-align: center;\n        line-height: .48rem;\n    }\n    &__login-link {\n        text-align: center;\n        font-size: .14rem;\n        color: $content-notice-fontcolor;\n    }\n}\n</style>\n","import { render } from \"./Login.vue?vue&type=template&id=a31018d6&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=a31018d6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-a31018d6\"\n\nexport default script"],"sourceRoot":""}