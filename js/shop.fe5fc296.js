(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop"],{1148:function(t,e,c){"use strict";var n=c("a691"),a=c("1d80");t.exports=function(t){var e=String(a(this)),c="",r=n(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(c+=e);return c}},"1c2b":function(t,e,c){},"408a":function(t,e,c){var n=c("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"4b89":function(t,e,c){},"5f6f":function(t,e,c){"use strict";c.r(e);c("b0c0");var n=c("7a23"),a=Object(n["H"])("data-v-46456a5d");Object(n["t"])("data-v-46456a5d");var r={class:"wrapper"},o={class:"search"},i=Object(n["h"])("div",{class:"search__content"},[Object(n["h"])("span",{class:"search__content__icon iconfont"},""),Object(n["h"])("input",{class:"search__content__input",placeholder:"请输入商品名称"})],-1);Object(n["r"])();var s=a((function(t,e,c,a,s,l){var u=Object(n["x"])("ShopInfo"),d=Object(n["x"])("Content"),h=Object(n["x"])("Cart");return Object(n["q"])(),Object(n["d"])("div",r,[Object(n["h"])("div",o,[Object(n["h"])("div",{class:"search__back iconfont",onClick:e[1]||(e[1]=function(){return a.handleBackClick&&a.handleBackClick.apply(a,arguments)})},"  "),i]),a.item.imgUrl?(Object(n["q"])(),Object(n["d"])(u,{key:0,item:a.item,hideBorder:!0},null,8,["item"])):Object(n["e"])("",!0),Object(n["h"])(d,{shopName:a.item.name},null,8,["shopName"]),Object(n["h"])(h)])})),l=c("1da1"),u=(c("96cf"),c("6c02")),d=c("d7d0"),h=c("b775"),b=Object(n["H"])("data-v-62da9323");Object(n["t"])("data-v-62da9323");var p={class:"content"},_={class:"category"},j={class:"product"},O=Object(n["h"])("img",{src:"http://www.dell-lee.com/imgs/vue3/near.png",alt:"",srcset:"",class:"product__item__img"},null,-1),m={class:"product__item__detail"},v={class:"product__item__title ellipsis"},f={class:"product__item__sales"},C={class:"product__item__price"},g=Object(n["h"])("span",{class:"product__item__yen"},"¥",-1),k={class:"product__item__origin"},I={class:"product__number"};Object(n["r"])();var w=b((function(t,e,c,a,r,o){return Object(n["q"])(),Object(n["d"])("div",p,[Object(n["h"])("div",_,[(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(a.categories,(function(t){return Object(n["q"])(),Object(n["d"])("div",{class:{category__item:!0,"category__item--active":a.currentTab===t.tab},key:t.name,onClick:function(){return a.handleTabClick(t.tab)}},Object(n["z"])(t.name),11,["onClick"])})),128))]),Object(n["h"])("div",j,[(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(a.list,(function(t){var e,r,o,i;return Object(n["q"])(),Object(n["d"])("div",{class:"product__item",key:t._id},[O,Object(n["h"])("div",m,[Object(n["h"])("h4",v,Object(n["z"])(t.name),1),Object(n["h"])("p",f,"月售"+Object(n["z"])(t.sales)+"件",1),Object(n["h"])("div",C,[g,Object(n["g"])(Object(n["z"])(t.price)+" ",1),Object(n["h"])("span",k,"¥"+Object(n["z"])(t.oldPrice),1)])]),Object(n["h"])("div",I,[Object(n["h"])("span",{class:"product__number__minus",onClick:function(){a.changeCartItem(a.shopId,t._id,t,-1,c.shopName)}},"-",8,["onClick"]),Object(n["g"])(Object(n["z"])((null===(e=a.cartList)||void 0===e||null===(r=e[a.shopId])||void 0===r||null===(o=r.productList)||void 0===o||null===(i=o[t._id])||void 0===i?void 0:i.count)||0)+" ",1),Object(n["h"])("span",{class:"product__number__plus",onClick:function(){a.changeCartItem(a.shopId,t._id,t,1,c.shopName)}},"+",8,["onClick"])])])})),128))])])})),L=c("5502"),x=function(t){var e=Object(L["b"])(),c=e.state.cartList,a=function(t,c,n,a){e.commit("changeCartItemInfo",{shopId:t,productId:c,productInfo:n,num:a})},r=Object(n["b"])((function(){var e,n=(null===(e=c[t])||void 0===e?void 0:e.productList)||[];return console.log(c),n}));return{cartList:c,productList:r,changeCartItemInfo:a}},y=[{name:"全部商品",tab:"all"},{name:"秒杀",tab:"seckill"},{name:"新鲜水果",tab:"fruit"},{name:"热销",tab:"hot"},{name:"水果1",tab:"fruit1"},{name:"秒杀1",tab:"seckill1"},{name:"新鲜水果2",tab:"fruit2"},{name:"秒杀2",tab:"seckill2"},{name:"新鲜水果3",tab:"fruit3"}],z=function(){var t=Object(n["v"])(y[0].tab),e=function(e){t.value=e};return{currentTab:t,handleTabClick:e}},S=function(t){var e=Object(u["c"])(),c=e.params.id,a=Object(n["u"])({list:[]}),r=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["a"])("/api/shop/".concat(c,"/products"),{tab:t.tab});case 2:r=e.sent,200===(null===r||void 0===r?void 0:r.code)&&null!==r&&void 0!==r&&null!==(n=r.data)&&void 0!==n&&n.length&&(a.list=r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n["F"])((function(){r()}));var o=Object(n["A"])(a),i=o.list;return{list:i}},q=function(){var t=Object(L["b"])(),e=x(),c=e.cartList,n=e.changeCartItemInfo,a=function(e,c){t.commit("changeShopName",{shopId:e,shopName:c})},r=function(t,e,c,r,o){console.log(o),n(t,e,c,r),a(t,o)},o=function(t,e){var n,a,r;return console.log("productId="+e),(null===c||void 0===c||null===(n=c[t])||void 0===n||null===(a=n.productList)||void 0===a||null===(r=a[e])||void 0===r?void 0:r.count)||0};return{cartList:c,changeCartItem:r,getProductCartCount:o}},N={name:"Content",props:["shopName"],setup:function(){var t=Object(u["c"])(),e=t.params.id,c=z(),n=c.currentTab,a=c.handleTabClick,r=S(n),o=r.list,i=q(),s=i.changeCartItem,l=i.cartList,d=i.getProductCartCount;return{categories:y,currentTab:n,handleTabClick:a,list:o,shopId:e,changeCartItem:s,cartList:l,getProductCartCount:d}}};c("bc79");N.render=w,N.__scopeId="data-v-62da9323";var T=N,P=Object(n["H"])("data-v-314b01ea");Object(n["t"])("data-v-314b01ea");var B={class:"cart"},F={key:0,class:"product"},H={class:"product__header"},R=Object(n["g"])(" 全选 "),M={key:0,class:"product__item"},E={class:"product__item__detail"},A={class:"product__item__title"},D={class:"product__item__price"},J=Object(n["h"])("span",{class:"product__item__yen"},"¥",-1),U={class:"product__item__origin"},W={class:"product__number"},G={class:"check"},K={class:"check__icon"},Q={class:"check__icon__tag"},V={class:"check__info"},X=Object(n["g"])(" 总计："),Y={class:"check__info__price"},Z={class:"check__btn"},$=Object(n["g"])("去结算");Object(n["r"])();var tt=P((function(t,e,c,a,r,o){var i=Object(n["x"])("router-link");return Object(n["q"])(),Object(n["d"])(n["a"],null,[a.showCart&&a.calculations.total>0?(Object(n["q"])(),Object(n["d"])("div",{key:0,class:"mask",onClick:e[1]||(e[1]=function(){return a.handleCartShowChange&&a.handleCartShowChange.apply(a,arguments)})})):Object(n["e"])("",!0),Object(n["h"])("div",B,[a.showCart&&a.calculations.total>0?(Object(n["q"])(),Object(n["d"])("div",F,[Object(n["h"])("div",H,[Object(n["h"])("div",{class:"product__header__all",onClick:e[2]||(e[2]=function(){return a.setCartItemsChecked(a.shopId)})},[Object(n["h"])("span",{class:"product__header__icon iconfont",innerHTML:a.calculations.allChecked?"":""},null,8,["innerHTML"]),R]),Object(n["h"])("div",{class:"product__header__clear",onClick:e[3]||(e[3]=function(){return a.cleanCartProducts(a.shopId)})},"清空购物车")]),(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(a.productList,(function(t){return Object(n["q"])(),Object(n["d"])(n["a"],{key:t._id},[t.count>0?(Object(n["q"])(),Object(n["d"])("div",M,[Object(n["h"])("div",{class:"product__item__checked iconfont",innerHTML:t.check?"":"",onClick:function(){return a.changeCartItemChecked(a.shopId,t._id)}},null,8,["innerHTML","onClick"]),Object(n["h"])("img",{class:"product__item__img",src:t.imgUrl},null,8,["src"]),Object(n["h"])("div",E,[Object(n["h"])("h4",A,Object(n["z"])(t.name),1),Object(n["h"])("p",D,[J,Object(n["g"])(Object(n["z"])(t.price)+" ",1),Object(n["h"])("span",U,"¥"+Object(n["z"])(t.oldPrice),1)])]),Object(n["h"])("div",W,[Object(n["h"])("span",{class:"product__number__minus",onClick:function(){a.changeCartItemInfo(a.shopId,t._id,t,-1)}},"-",8,["onClick"]),Object(n["g"])(" "+Object(n["z"])(t.count||0)+" ",1),Object(n["h"])("span",{class:"product__number__plus",onClick:function(){a.changeCartItemInfo(a.shopId,t._id,t,1)}},"+",8,["onClick"])])])):Object(n["e"])("",!0)],64)})),128))])):Object(n["e"])("",!0),Object(n["h"])("div",G,[Object(n["h"])("div",K,[Object(n["h"])("img",{src:"http://www.dell-lee.com/imgs/vue3/basket.png",class:"check__icon__img",onClick:e[4]||(e[4]=function(){return a.handleCartShowChange&&a.handleCartShowChange.apply(a,arguments)})}),Object(n["h"])("div",Q,Object(n["z"])(a.calculations.total),1)]),Object(n["h"])("div",V,[X,Object(n["h"])("span",Y,"¥"+Object(n["z"])(a.calculations.price),1)]),Object(n["h"])("div",Z,[Object(n["h"])(i,{to:{path:"/orderConfirmation/".concat(a.shopId)}},{default:P((function(){return[$]})),_:1},8,["to"])])])])],64)})),et=c("75c9"),ct=function(t){var e=Object(L["b"])(),c=Object(et["a"])(t),n=c.productList,a=c.calculations,r=c.changeCartItemInfo,o=function(t,c){e.commit("changeCartItemChecked",{shopId:t,productId:c})},i=function(t){e.commit("cleanCartProducts",{shopId:t})},s=function(t){e.commit("setCartItemsChecked",{shopId:t})};return{calculations:a,productList:n,cleanCartProducts:i,changeCartItemInfo:r,changeCartItemChecked:o,setCartItemsChecked:s}},nt=function(){var t=Object(n["v"])(!1),e=function(){t.value=!t.value,console.log("2222222222222222")};return{showCart:t,handleCartShowChange:e}},at={name:"Cart",setup:function(){var t=Object(u["c"])(),e=t.params.id,c=nt(),n=c.showCart,a=c.handleCartShowChange,r=ct(e),o=r.calculations,i=r.productList,s=r.cleanCartProducts,l=r.changeCartItemInfo,d=r.changeCartItemChecked,h=r.setCartItemsChecked;return{calculations:o,shopId:e,productList:i,cleanCartProducts:s,changeCartItemInfo:l,changeCartItemChecked:d,setCartItemsChecked:h,showCart:n,handleCartShowChange:a}}};c("fe8e");at.render=tt,at.__scopeId="data-v-314b01ea";var rt=at,ot=function(){var t=Object(n["u"])({item:{}}),e=Object(u["c"])();console.log(e.params.id);var c=function(){var c=Object(l["a"])(regeneratorRuntime.mark((function c(){var n;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,Object(h["a"])("/api/shop/".concat(e.params.id));case 2:n=c.sent,200===(null===n||void 0===n?void 0:n.code)&&null!==n&&void 0!==n&&n.data&&(t.item=n.data,console.log(n.data));case 4:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}(),a=Object(n["A"])(t),r=a.item;return{item:r,getItemData:c}},it=function(){var t=Object(u["d"])(),e=function(){t.back()};return{handleBackClick:e}},st={name:"Shop",components:{ShopInfo:d["a"],Content:T,Cart:rt},setup:function(){var t=ot(),e=t.item,c=t.getItemData,n=it(),a=n.handleBackClick;return c(),{item:e,handleBackClick:a}}};c("8b86");st.render=s,st.__scopeId="data-v-46456a5d";e["default"]=st},"75c9":function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));c("b680");var n=c("5502"),a=c("7a23"),r=function(t){var e=Object(n["b"])(),c=e.state.cartList,r=function(t,c,n,a){e.commit("changeCartItemInfo",{shopId:t,productId:c,productInfo:n,num:a})},o=Object(a["b"])((function(){var e,n=(null===(e=c[t])||void 0===e?void 0:e.productList)||[];return console.log(c),n})),i=Object(a["b"])((function(){var e,n=(null===(e=c[t])||void 0===e?void 0:e.shopName)||"";return console.log("111123123"),console.log(c[t]),n})),s=Object(a["b"])((function(){var e,n=null===(e=c[t])||void 0===e?void 0:e.productList;console.log("1111111"),console.log(n);var a={total:0,price:0,allChecked:!0};if(n)for(var r in n){var o=n[r];console.log(o._id),a.total+=o.count,o.check&&(a.price+=o.count*o.price),o.count>0&&!o.check&&(a.allChecked=!1)}return a.price=a.price.toFixed(2),a}));return{cartList:c,productList:o,changeCartItemInfo:r,shopName:i,calculations:s}}},"8b86":function(t,e,c){"use strict";c("f0e5")},9040:function(t,e,c){},"9ecf":function(t,e,c){"use strict";c("4b89")},b680:function(t,e,c){"use strict";var n=c("23e7"),a=c("a691"),r=c("408a"),o=c("1148"),i=c("d039"),s=1..toFixed,l=Math.floor,u=function(t,e,c){return 0===e?c:e%2===1?u(t,e-1,c*t):u(t*t,e/2,c)},d=function(t){var e=0,c=t;while(c>=4096)e+=12,c/=4096;while(c>=2)e+=1,c/=2;return e},h=function(t,e,c){var n=-1,a=c;while(++n<6)a+=e*t[n],t[n]=a%1e7,a=l(a/1e7)},b=function(t,e){var c=6,n=0;while(--c>=0)n+=t[c],t[c]=l(n/e),n=n%e*1e7},p=function(t){var e=6,c="";while(--e>=0)if(""!==c||0===e||0!==t[e]){var n=String(t[e]);c=""===c?n:c+o.call("0",7-n.length)+n}return c},_=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i((function(){s.call({})}));n({target:"Number",proto:!0,forced:_},{toFixed:function(t){var e,c,n,i,s=r(this),l=a(t),_=[0,0,0,0,0,0],j="",O="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(j="-",s=-s),s>1e-21)if(e=d(s*u(2,69,1))-69,c=e<0?s*u(2,-e,1):s/u(2,e,1),c*=4503599627370496,e=52-e,e>0){h(_,0,c),n=l;while(n>=7)h(_,1e7,0),n-=7;h(_,u(10,n,1),0),n=e-1;while(n>=23)b(_,1<<23),n-=23;b(_,1<<n),h(_,1,1),b(_,2),O=p(_)}else h(_,0,c),h(_,1<<-e,0),O=p(_)+o.call("0",l);return l>0?(i=O.length,O=j+(i<=l?"0."+o.call("0",l-i)+O:O.slice(0,i-l)+"."+O.slice(i-l))):O=j+O,O}})},bc79:function(t,e,c){"use strict";c("9040")},d7d0:function(t,e,c){"use strict";c("b0c0");var n=c("7a23"),a=Object(n["H"])("data-v-956de460");Object(n["t"])("data-v-956de460");var r={class:"shop"},o=Object(n["h"])("img",{src:"http://www.dell-lee.com/imgs/vue3/near.png",class:"shop__img"},null,-1),i={class:"shop__content"},s={class:"shop__content__title"},l={class:"shop__content__tags"},u={class:"shop__content__tag"},d={class:"shop__content__tag"},h={class:"shop__content__tag"},b={class:"shop__content__highlight"};Object(n["r"])();var p=a((function(t,e,c,a,p,_){return Object(n["q"])(),Object(n["d"])("div",r,[o,Object(n["h"])("div",{class:{shop__content:!0,"shop__content--bordered":!c.hideBorder}},[Object(n["h"])("div",i,[Object(n["h"])("div",s,Object(n["z"])(c.item.name),1),Object(n["h"])("div",l,[Object(n["h"])("span",u,"月售:"+Object(n["z"])(c.item.sales),1),Object(n["h"])("span",d,"起送:"+Object(n["z"])(c.item.expressLimit),1),Object(n["h"])("span",h,"基础运费"+Object(n["z"])(c.item.expressPrice)+"元",1)]),Object(n["h"])("div",b,Object(n["z"])(c.item.slogan),1)])],2)])})),_={name:"ShopInfo",props:["item","hideBorder"]};c("9ecf");_.render=p,_.__scopeId="data-v-956de460";e["a"]=_},f0e5:function(t,e,c){},fe8e:function(t,e,c){"use strict";c("1c2b")}}]);
//# sourceMappingURL=shop.fe5fc296.js.map